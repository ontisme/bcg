import{e as V,j as b,an as E,ao as N,ap as z,l as y,z as h,A as S,B as f,J as g,I as v,D as C,C as e,aq as K,F as k,G as L,H as O,K as D,E as $,ar as R,ab as G,as as j,v as I,x as M,ag as q,h as P,ai as H,L as B,_ as J,at as W,a8 as Q,au as X,w as Y,y as Z,ac as ee,av as oe}from"./index-BJfYj4F8.js";import{u as te,_ as se}from"./index-BRZJB4R5.js";import{r as ae,s as ne,_ as re}from"./RadioGroup-NCbRlnkx.js";import{_ as le}from"./Space-B8hsGOMY.js";import{_ as ce}from"./isme-DvbtAksX.js";import{_ as ie}from"./Avatar-DvswvANW.js";import{N as ue}from"./Dropdown-BfCSLHLa.js";import{a as pe}from"./Menu-m6tV1-Dm.js";const _e=V({name:"RadioButton",props:ae,setup:ne,render(){const{mergedClsPrefix:s}=this;return b("label",{class:[`${s}-radio-button`,this.mergedDisabled&&`${s}-radio-button--disabled`,this.renderSafeChecked&&`${s}-radio-button--checked`,this.focus&&[`${s}-radio-button--focus`]]},b("input",{ref:"inputRef",type:"radio",class:`${s}-radio-input`,value:this.value,name:this.mergedName,checked:this.renderSafeChecked,disabled:this.mergedDisabled,onChange:this.handleRadioInputChange,onFocus:this.handleRadioInputFocus,onBlur:this.handleRadioInputBlur}),b("div",{class:`${s}-radio-button__state-border`}),E(this.$slots.default,o=>!o&&!this.label?null:b("div",{ref:"labelRef",class:`${s}-radio__label`},o||this.label)))}}),de={class:"flex"},me={__name:"RoleSelect",setup(s,{expose:o}){var x,w;const n=N(),t=z(),p=y(n.roles||[]),r=y(((x=n.currentRole)==null?void 0:x.code)??((w=p.value[0])==null?void 0:w.code)??""),[l,_]=te();function c(i){var u;(u=l.value)==null||u.open({...i})}async function a(){var i;try{_.value=!0;const{data:u}=await R.switchCurrentRole(r.value);await t.switchCurrentRole(u),_.value=!1,$message.success("切換成功"),(i=l.value)==null||i.handleOk()}catch(u){return console.error(u),_.value=!1,!1}}async function d(){var i;await R.logout(),t.logout(),(i=l.value)==null||i.close(),$message.success("已退出登入")}return o({open:c}),(i,u)=>{const T=_e,F=le,U=re,A=G;return h(),S(e(se),{ref_key:"modalRef",ref:l,title:"請選擇角色",width:"360px",class:"p-12"},{footer:f(()=>{var m;return[g("div",de,[v(A,{class:"flex-1",size:"large",onClick:u[1]||(u[1]=$e=>d())},{default:f(()=>[C(" 退出登入 ")]),_:1}),v(A,{loading:e(_),class:"ml-20 flex-1",type:"primary",size:"large",disabled:((m=e(n).currentRole)==null?void 0:m.code)===e(r),onClick:a},{default:f(()=>[C(" 確認 ")]),_:1},8,["loading","disabled"])])]}),default:f(()=>[v(U,{value:e(r),"onUpdate:value":u[0]||(u[0]=m=>K(r)?r.value=m:null),class:"cus-scroll-y max-h-420 w-full py-16"},{default:f(()=>[v(F,{vertical:"",size:24,class:"mx-12"},{default:f(()=>[(h(!0),k(L,null,O(e(p),m=>(h(),S(T,{key:m.id,class:D(["h-36 w-full text-center text-16 leading-36",{"bg-primary! color-white!":m.code===e(r)}]),value:m.code},{default:f(()=>[C($(m.name),1)]),_:2},1032,["class","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1},512)}}},fe={class:"flex cursor-pointer items-center"},he={key:0,class:"ml-12 flex-col flex-shrink-0 items-center"},ve={class:"text-14"},ge={class:"text-12 opacity-50"},Ie={__name:"UserAvatar",setup(s){const{t:o}=j(),n=I(),t=N(),p=z(),r=M(),l=q([{label:o("userAvatar.profile"),key:"profile",icon:()=>b("i",{class:"i-material-symbols:person-outline text-14"}),show:P(()=>{var a;return(a=r.accessRoutes)==null?void 0:a.some(d=>d.path==="/profile")})},{label:o("userAvatar.logout"),key:"logout",icon:()=>b("i",{class:"i-mdi:exit-to-app text-14"})}]),_=y(null);function c(a){var d;switch(a){case"profile":n.push("/profile");break;case"toggleRole":(d=_.value)==null||d.open({onOk(){location.reload()}});break;case"logout":$dialog.confirm({title:o("userAvatar.prompt"),type:"info",content:o("userAvatar.confirmLogout"),async confirm(){try{await R.logout()}catch(x){console.error(x)}p.logout(),$message.success(o("userAvatar.logoutSuccess"))}});break}}return(a,d)=>{const x=ie,w=ue;return h(),k(L,null,[v(w,{options:l,onSelect:c},{default:f(()=>{var i;return[g("div",fe,[v(x,{round:"",size:36,src:e(t).avatar},null,8,["src"]),e(t).userInfo?(h(),k("div",he,[g("span",ve,$(e(t).nickName??e(t).username),1),g("span",ge,"["+$((i=e(t).currentRole)==null?void 0:i.name)+"]",1)])):H("",!0)])]}),_:1},8,["options"]),v(e(me),{ref_key:"roleSelectRef",ref:_},null,512)],64)}}},Me={__name:"MenuCollapse",setup(s){const o=B();return(n,t)=>(h(),k("div",{class:"f-c-c cursor-pointer rounded-4 p-6 text-22 transition-all-300 auto-bg-hover",onClick:t[0]||(t[0]=(...p)=>e(o).switchCollapsed&&e(o).switchCollapsed(...p))},[g("i",{class:D(e(o).collapsed?"i-line-md-menu-unfold-left":"i-line-md-menu-fold-left")},null,2)]))}},xe={},be={class:"h-40 w-40 rounded-4 p-1/100"},ke=g("img",{src:ce,alt:"Logo"},null,-1),we=[ke];function ye(s,o){return h(),k("div",be,we)}const Se=J(xe,[["render",ye]]),Pe={__name:"SideLogo",setup(s){const o="BCGAssistant",n=B();return(t,p)=>{const r=Se,l=W("router-link");return h(),S(l,{class:"h-60 f-c-c",to:"/"},{default:f(()=>[v(r),Q(g("h2",{class:"ml-10 max-w-140 flex-shrink-0 text-16 font-bold"},$(e(o)),513),[[X,!e(n).collapsed]])]),_:1})}}},Te={__name:"SideMenu",setup(s){const o=I(),n=Y(),t=B(),p=M(),r=P(()=>{var c;return((c=n.meta)==null?void 0:c.parentKey)||n.name}),l=y(null);Z(n,async()=>{var c;await ee(),(c=l.value)==null||c.showOption()});function _(c,a){oe(a.originPath)?$dialog.confirm({type:"info",title:"請選擇打開方式",positiveText:"外鏈打開",negativeText:"在本站內嵌打開",confirm(){window.open(a.originPath)},cancel:()=>{o.push(a.path)}}):o.push(a.path)}return(c,a)=>{const d=pe;return h(),S(d,{ref_key:"menu",ref:l,class:"side-menu",accordion:"",indent:18,"collapsed-icon-size":22,"collapsed-width":64,collapsed:e(t).collapsed,options:e(p).menus,value:e(r),"onUpdate:value":_},null,8,["collapsed","options","value"])}}};export{Pe as _,Te as a,Me as b,Ie as c};
