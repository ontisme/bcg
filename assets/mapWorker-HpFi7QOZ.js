(function(){"use strict";var O={exports:{}};O.exports,function(w){var m=function(){var l=String.fromCharCode,M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",S={};function U(e,r){if(!S[e]){S[e]={};for(var c=0;c<e.length;c++)S[e][e.charAt(c)]=c}return S[e][r]}var v={compressToBase64:function(e){if(e==null)return"";var r=v._compress(e,6,function(c){return M.charAt(c)});switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(e){return e==null?"":e==""?null:v._decompress(e.length,32,function(r){return U(M,e.charAt(r))})},compressToUTF16:function(e){return e==null?"":v._compress(e,15,function(r){return l(r+32)})+" "},decompressFromUTF16:function(e){return e==null?"":e==""?null:v._decompress(e.length,16384,function(r){return e.charCodeAt(r)-32})},compressToUint8Array:function(e){for(var r=v.compress(e),c=new Uint8Array(r.length*2),t=0,i=r.length;t<i;t++){var d=r.charCodeAt(t);c[t*2]=d>>>8,c[t*2+1]=d%256}return c},decompressFromUint8Array:function(e){if(e==null)return v.decompress(e);for(var r=new Array(e.length/2),c=0,t=r.length;c<t;c++)r[c]=e[c*2]*256+e[c*2+1];var i=[];return r.forEach(function(d){i.push(l(d))}),v.decompress(i.join(""))},compressToEncodedURIComponent:function(e){return e==null?"":v._compress(e,6,function(r){return g.charAt(r)})},decompressFromEncodedURIComponent:function(e){return e==null?"":e==""?null:(e=e.replace(/ /g,"+"),v._decompress(e.length,32,function(r){return U(g,e.charAt(r))}))},compress:function(e){return v._compress(e,16,function(r){return l(r)})},_compress:function(e,r,c){if(e==null)return"";var t,i,d={},A={},y="",_="",p="",h=2,u=3,f=2,a=[],n=0,s=0,o;for(o=0;o<e.length;o+=1)if(y=e.charAt(o),Object.prototype.hasOwnProperty.call(d,y)||(d[y]=u++,A[y]=!0),_=p+y,Object.prototype.hasOwnProperty.call(d,_))p=_;else{if(Object.prototype.hasOwnProperty.call(A,p)){if(p.charCodeAt(0)<256){for(t=0;t<f;t++)n=n<<1,s==r-1?(s=0,a.push(c(n)),n=0):s++;for(i=p.charCodeAt(0),t=0;t<8;t++)n=n<<1|i&1,s==r-1?(s=0,a.push(c(n)),n=0):s++,i=i>>1}else{for(i=1,t=0;t<f;t++)n=n<<1|i,s==r-1?(s=0,a.push(c(n)),n=0):s++,i=0;for(i=p.charCodeAt(0),t=0;t<16;t++)n=n<<1|i&1,s==r-1?(s=0,a.push(c(n)),n=0):s++,i=i>>1}h--,h==0&&(h=Math.pow(2,f),f++),delete A[p]}else for(i=d[p],t=0;t<f;t++)n=n<<1|i&1,s==r-1?(s=0,a.push(c(n)),n=0):s++,i=i>>1;h--,h==0&&(h=Math.pow(2,f),f++),d[_]=u++,p=String(y)}if(p!==""){if(Object.prototype.hasOwnProperty.call(A,p)){if(p.charCodeAt(0)<256){for(t=0;t<f;t++)n=n<<1,s==r-1?(s=0,a.push(c(n)),n=0):s++;for(i=p.charCodeAt(0),t=0;t<8;t++)n=n<<1|i&1,s==r-1?(s=0,a.push(c(n)),n=0):s++,i=i>>1}else{for(i=1,t=0;t<f;t++)n=n<<1|i,s==r-1?(s=0,a.push(c(n)),n=0):s++,i=0;for(i=p.charCodeAt(0),t=0;t<16;t++)n=n<<1|i&1,s==r-1?(s=0,a.push(c(n)),n=0):s++,i=i>>1}h--,h==0&&(h=Math.pow(2,f),f++),delete A[p]}else for(i=d[p],t=0;t<f;t++)n=n<<1|i&1,s==r-1?(s=0,a.push(c(n)),n=0):s++,i=i>>1;h--,h==0&&(h=Math.pow(2,f),f++)}for(i=2,t=0;t<f;t++)n=n<<1|i&1,s==r-1?(s=0,a.push(c(n)),n=0):s++,i=i>>1;for(;;)if(n=n<<1,s==r-1){a.push(c(n));break}else s++;return a.join("")},decompress:function(e){return e==null?"":e==""?null:v._decompress(e.length,32768,function(r){return e.charCodeAt(r)})},_decompress:function(e,r,c){var t=[],i=4,d=4,A=3,y="",_=[],p,h,u,f,a,n,s,o={val:c(0),position:r,index:1};for(p=0;p<3;p+=1)t[p]=p;for(u=0,a=Math.pow(2,2),n=1;n!=a;)f=o.val&o.position,o.position>>=1,o.position==0&&(o.position=r,o.val=c(o.index++)),u|=(f>0?1:0)*n,n<<=1;switch(u){case 0:for(u=0,a=Math.pow(2,8),n=1;n!=a;)f=o.val&o.position,o.position>>=1,o.position==0&&(o.position=r,o.val=c(o.index++)),u|=(f>0?1:0)*n,n<<=1;s=l(u);break;case 1:for(u=0,a=Math.pow(2,16),n=1;n!=a;)f=o.val&o.position,o.position>>=1,o.position==0&&(o.position=r,o.val=c(o.index++)),u|=(f>0?1:0)*n,n<<=1;s=l(u);break;case 2:return""}for(t[3]=s,h=s,_.push(s);;){if(o.index>e)return"";for(u=0,a=Math.pow(2,A),n=1;n!=a;)f=o.val&o.position,o.position>>=1,o.position==0&&(o.position=r,o.val=c(o.index++)),u|=(f>0?1:0)*n,n<<=1;switch(s=u){case 0:for(u=0,a=Math.pow(2,8),n=1;n!=a;)f=o.val&o.position,o.position>>=1,o.position==0&&(o.position=r,o.val=c(o.index++)),u|=(f>0?1:0)*n,n<<=1;t[d++]=l(u),s=d-1,i--;break;case 1:for(u=0,a=Math.pow(2,16),n=1;n!=a;)f=o.val&o.position,o.position>>=1,o.position==0&&(o.position=r,o.val=c(o.index++)),u|=(f>0?1:0)*n,n<<=1;t[d++]=l(u),s=d-1,i--;break;case 2:return _.join("")}if(i==0&&(i=Math.pow(2,A),A++),t[s])y=t[s];else if(s===d)y=h+h.charAt(0);else return null;_.push(y),t[d++]=h+y.charAt(0),i--,h=y,i==0&&(i=Math.pow(2,A),A++)}}};return v}();w!=null?w.exports=m:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return m})}(O);var D=O.exports;self.onmessage=function(w){if(w.data.type==="processMap"){const m=w.data.mapData,l=B(m);self.postMessage({username:m.username,compressedData:l})}};function B(w){const m=x(w.header),l=x(w.mapData),M=D.compress(JSON.stringify(m)),g=D.compress(JSON.stringify(l));return{header:M,mapData:g}}function x(w){return typeof w!="object"||w===null?w:Array.isArray(w)?w.map(x):Object.fromEntries(Object.entries(w).map(([m,l])=>typeof l=="bigint"?[m,l.toString()]:typeof l=="object"&&l!==null?[m,x(l)]:[m,l]))}})();
