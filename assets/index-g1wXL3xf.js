import{l as h,h as O,z as m,A as k,B as f,I as Y,bP as _,C as s,J as T,E as v,r as C,F as q,D as A,ai as w,aq as x,ac as B,ab as D,bf as F,bg as b}from"./index-DelEC5j5.js";function I(){const n=h(null),o=O({get(){var t;return(t=n.value)==null?void 0:t.okLoading},set(t){n.value.okLoading=t}});return[n,o]}function c(n,o){return n.currentStyle?n.currentStyle[o]:window.getComputedStyle(n,null)[o]}function L(n,o){if(!n||!o)return;const t={left:0,top:0,currentX:0,currentY:0,flag:!1};c(o,"left")!=="auto"&&(t.left=c(o,"left")),c(o,"top")!=="auto"&&(t.top=c(o,"top")),n.style.cursor="move",n.onmousedown=function(a){t.flag=!0,a.preventDefault(),t.currentX=a.clientX,t.currentY=a.clientY},document.onmouseup=function(){t.flag=!1,c(o,"left")!=="auto"&&(t.left=c(o,"left")),c(o,"top")!=="auto"&&(t.top=c(o,"top"))},document.onmousemove=function(a){if(!(a.target!==n&&!t.flag)&&(a.preventDefault(),t.flag)){const e=a.clientX,i=a.clientY,g=e-t.currentX,u=i-t.currentY,d=Number.parseInt(t.left)+g,p=Number.parseInt(t.top)+u;o.style.left=`${d}px`,o.style.top=`${p}px`}}}const V={class:"modal-header"},j={key:1,class:"flex justify-end"},E={__name:"index",props:{width:{type:String,default:"800px"},title:{type:String,default:""},closable:{type:Boolean,default:!0},cancelText:{type:String,default:"取消"},okText:{type:String,default:"確定"},showFooter:{type:Boolean,default:!0},showCancel:{type:Boolean,default:!0},showOk:{type:Boolean,default:!0},modalStyle:{type:Object,default:()=>{}},contentStyle:{type:Object,default:()=>{}},onOk:{type:Function,default:()=>{}},onCancel:{type:Function,default:()=>{}}},setup(n,{expose:o}){const t=n,a=h(!1),e=h({}),i=O({get(){var l;return!!((l=e.value)!=null&&l.okLoading)},set(l){e.value&&(e.value.okLoading=l)}});async function g(l={}){e.value={...t,...l},a.value=!0,await B(),L(Array.prototype.at.call(document.querySelectorAll(".modal-header"),-1),Array.prototype.at.call(document.querySelectorAll(".modal-box"),-1))}function u(){a.value=!1}async function d(l){if(typeof e.value.onOk!="function")return u();try{await e.value.onOk(l)!==!1&&u()}catch(r){i.value=!1,console.error(r)}}async function p(l){if(typeof e.value.onCancel!="function")return u();try{await e.value.onCancel(l)!==!1&&u()}catch(r){i.value=!1,console.error(r)}}async function $(){await B(),L(Array.prototype.at.call(document.querySelectorAll(".modal-header"),-1),Array.prototype.at.call(document.querySelectorAll(".modal-box"),-1))}return o({open:g,close:u,handleOk:d,handleCancel:p,okLoading:i,options:e}),(l,r)=>{const S=D,N=F,X=b;return m(),k(X,{show:s(a),"onUpdate:show":r[3]||(r[3]=y=>x(a)?a.value=y:null),class:"modal-box",style:_({width:s(e).width,...s(e).modalStyle}),preset:void 0,size:"huge",bordered:!1,onAfterLeave:$},{default:f(()=>[Y(N,{style:_(s(e).contentStyle),closable:s(e).closable,onClose:r[2]||(r[2]=y=>u())},{header:f(()=>[T("header",V,v(s(e).title),1)]),footer:f(()=>[l.$slots.footer?C(l.$slots,"footer",{key:0}):s(e).showFooter?(m(),q("footer",j,[s(e).showCancel?(m(),k(S,{key:0,onClick:r[0]||(r[0]=y=>p())},{default:f(()=>[A(v(s(e).cancelText),1)]),_:1})):w("",!0),s(e).showOk?(m(),k(S,{key:1,type:"primary",loading:s(e).okLoading,class:"ml-20",onClick:r[1]||(r[1]=y=>d())},{default:f(()=>[A(v(s(e).okText),1)]),_:1},8,["loading"])):w("",!0)])):w("",!0)]),default:f(()=>[C(l.$slots,"default")]),_:3},8,["style","closable"])]),_:3},8,["show","style"])}}};export{E as _,I as u};
